{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SC6EA,SAASC,EAAcC,EAAcC,GACnC,MAAMC,EAAaF,EAAaG,QAAO,CAACC,EAAKC,KACvCA,EAAKC,KAAOL,GAGhBG,EAAIG,KAAKF,GAFAD,IAIR,IACGI,EAAaC,KAAKC,UAAUR,GAClCS,aAAaC,QAAQ,QAASJ,E,CDhFhC,MAAMK,EAAcC,SAASC,cAAc,cAmD3CF,EAAYG,iBAAiB,SCvD7B,SAAiCC,GAC/B,GACyB,WAAvBA,EAAIC,OAAOC,SACY,SAAvBF,EAAIC,OAAOC,SACY,QAAvBF,EAAIC,OAAOC,SACY,SAAvBF,EAAIC,OAAOC,QAEX,OAEF,GACEF,EAAIC,OAAOE,UAAUC,SAAS,cAC9BJ,EAAIC,OAAOE,UAAUC,SAAS,kBAE9B,OAEF,MAAMC,EAAaL,EAAIC,OAAOK,QAAQ,WAAWC,WAAW,GAAGA,WAAW,GAC1E,GAAIP,EAAIC,SAAWI,EACjB,OAKF,MAAMG,EAFgBR,EAAIC,OAEKK,QAAQ,oBACjCtB,EAAWgB,EAAIC,OAAOK,QAAQ,sBAAsBG,QAAQpB,GAE5DqB,EAAYV,EAAIC,OAAOK,QAAQ,OAAOC,WAAW,GACjDI,EAAeX,EAAIC,OAAOK,QAAQ,OAAOC,WAAW,GAC1DG,EAAUP,UAAUS,OAAO,aAC3BD,EAAaR,UAAUS,OAAO,aAE9B,IAAIC,EAAUnB,aAAaoB,QAAQ,SAC/B/B,EAAeS,KAAKuB,MAAMF,GAG9B,GAFA/B,EAAcC,EAAcC,GAExBwB,EAAOQ,aAAa,WAAY,CAClCR,EAAOS,gBAAgB,WACvB,IAAIJ,EAAUnB,aAAaoB,QAAQ,SAGnC,YADAhC,EADqBU,KAAKuB,MAAMF,GACJ7B,E,CAI9BwB,EAAOU,aAAa,WAAW,GAE/B,MAAMC,EAAgBnB,EAAIC,OAAOK,QAAQ,sBAAsBG,QAAQpB,GACjE+B,EAAiBpB,EAAIC,OAAOK,QAAQ,8BACpCe,EAAWD,EAAeb,WAAW,GAAGe,IACxCC,EAAUH,EAAeb,WAAW,GAAGiB,YACvCC,EAAWzB,EAAIC,OAAOK,QAAQ,WAC9BoB,EAAQD,EAASlB,WAAW,GAAGiB,YAC/BG,EAAWF,EAASlB,WAAW,GAAGiB,YAClCI,EAAiBH,EAASlB,WAAW,GAAGA,WAAW,GAAGiB,YACtDK,EAAMJ,EAASlB,WAAW,GAAGA,WAAW,GAAGuB,KAEjDjB,EAAUnB,aAAaoB,QAAQ,SAG/B,MAAMiB,EAAS,CACb1C,GAAI8B,EACJE,SAAUA,EACVE,QAASA,EACTG,MAAOA,EACPC,SAAUA,EACVC,eAAgBA,EAChBC,IAAKA,GAGP9C,EAAeS,KAAKuB,MAAMF,GAC1B9B,EAAaO,KAAKyC,GAClB,MAAMxC,EAAaC,KAAKC,UAAUV,GAClCW,aAAaC,QAAQ,QAASJ,E,IDdhCK,EAAYG,iBAAiB,SAnD7B,SAAqBC,GACnB,GAA4B,MAAxBA,EAAIC,OAAO+B,SACb,OAGmBhC,EAAIC,OACZiB,aAAa,gBAAgB,GAE1C,MAAMe,EAASjC,EAAIC,OAAOiC,WAAWA,WAAWA,WAC1CC,EAAOtC,SAASuC,cAAc,KACpCD,EAAKE,UAAY,eACjBF,EAAKhC,UAAUmC,IAAI,aACnBL,EAAOM,YAAYJ,GACnBF,EAAOO,MAAMC,QAAU,IACZR,EAAOS,aAAa,WAA/B,MAEMvB,EAAgBnB,EAAIC,OAAOK,QAAQ,sBAAsBG,QAAQpB,GACjE+B,EAAiBpB,EAAIC,OAAOK,QAAQ,OACpCe,EACJY,EAAO1B,WAAW,GAAGA,WAAW,GAAGA,WAAW,GAAGmC,aAAa,OAC1DnB,EAAUH,EAAeb,WAAW,GAAGiB,YACvCC,EAAWzB,EAAIC,OAAOK,QAAQ,WAC9BoB,EAAQD,EAASlB,WAAW,GAAGiB,YAC/BG,EAAWF,EAASlB,WAAW,GAAGiB,YAClCI,EAAiBH,EAASlB,WAAW,GAAGA,WAAW,GAAGiB,YACtDK,EAAMJ,EAASlB,WAAW,GAAGA,WAAW,GAAGuB,KAC3Ca,GAAO,IAAIC,MAAOC,UAClBC,EAAO,IAAIF,KAAKD,GAEtB,IAAI9B,EAAUnB,aAAaoB,QAAQ,aAEnC,MAAMiB,EAAS,CACb1C,GAAI8B,EACJE,SAAUA,EACVE,QAASA,EACTG,MAAOA,EACPC,SAAUA,EACVC,eAAgBA,EAChBC,IAAKA,EACLc,KAAMG,EAAKC,mBAAmB,UAG1BhE,EAAeS,KAAKuB,MAAMF,GAE3B,IAAImC,IAAIjE,EAAakE,KAAIC,GAAQ,CAACA,EAAS,GAAGA,MAAQC,SAE3DpE,EAAaO,KAAKyC,GAClB,MAAMxC,EAAaC,KAAKC,UAAUV,GAClCW,aAAaC,QAAQ,YAAaJ,E,IAKpC,MAAM6D,EAAcvD,SAASC,cAAc,iBACrCuD,EAAoBxD,SAASC,cAAc,oBAkBjD,SAASwD,GAAa5B,MACpBA,EAAK6B,MACLA,EAAKhC,QACLA,EAAOlC,GACPA,EAAEsC,SACFA,EAAQC,eACRA,EAAcC,IACdA,IAEA,MAAMR,EAAWkC,IAAQ,KAAK,oBAAoB,IAAI1B,KAtBtD,6EAwBIF,EAAS6B,OADc,MAEzB7B,EAAWA,EAAS8B,MAAM,EAAGC,KAA0B,OAEzD,MAAMZ,EAAO,IAAIF,KAAKhB,GAIhB+B,EAAgB,GAHVb,EAAKc,UAAUC,WAAWC,SAAS,EAAG,SACnChB,EAAKiB,WAAa,GAAGF,WAAWC,SAAS,EAAG,QAC9ChB,EAAKkB,cAAcH,aAEhC,MAAO,wCAAwCxE,qBAAsBsE,iKAGpBtC,mEACFE,kqCAUJG,2DACKC,0GAEGgC,mEACG9B,2H,EA3CxD,EAAAjD,EAAAqF,kBACGC,MAAK,EAACC,QAAEA,KACAA,EAAQlB,IAAIK,GAAcc,KAAK,MAEvCF,MATH,SAAwBG,GACtBzE,EAAY0E,UAAYD,EACxBE,EAASC,QAAQnB,EAAmBoB,E,IAmEjC/E,aAAaoB,QAAQ,cACxBpB,aAAaC,QAAQ,YAAa,MAE/BD,aAAaoB,QAAQ,UACxBpB,aAAaC,QAAQ,QAAS,MAGhC,MAAM8E,EAAS,CACbC,YAAY,GAGd,IAAIC,EAAgB,EAEpB,MA+BMJ,EAAW,IAAIK,kBA/BO,SAAUC,EAAIC,GACxC,IAAK,MAAMC,KAAYF,EACrB,GAAsB,IAAlBF,EACFA,GAAiB,MACZ,CACL,MAAM7B,EAAOO,EAAkB5C,QAAQqC,KAAKkC,MAAM,KAAKZ,KAAK,KAC5DhB,EAAYZ,MAAMyC,QAAU,OAEVC,MAAMC,UAAU1B,MAAM2B,KAAKxF,EAAYW,YACrB8E,QAClCC,GAAMA,EAAG7E,QAAQ8E,WAAazC,IAEVU,OAAS,EAC7B5D,EAAYW,WAAWiF,SAAQF,IACzBA,EAAG7E,QAAQ8E,WAAazC,EAC1BwC,EAAG9C,MAAMyC,QAAU,OAEnBK,EAAG9C,MAAMyC,QAAU,OAAO,KAI9BrF,EAAYW,WAAWiF,SAAQF,GAAOA,EAAG9C,MAAMyC,QAAU,SACzDrF,EAAY6F,mBACV,aACA,wK","sources":["src/js/news_cards.js","src/js/favorite_functions.js"],"sourcesContent":["import { getPopularNews } from '../api/newsApi';\nimport { addRemoveToLocalStorage, updateStorage } from './favorite_functions';\n//import addRemoveToLocalStorageREAD from './read';\n\nlet btnAddtoStorage;\n\nconst newsWrapper = document.querySelector('.list-news');\nfunction addReadMore(evt) {\n  if (evt.target.nodeName !== 'A') {\n    return;\n  }\n\n  const readMoreLink = evt.target;\n  readMoreLink.setAttribute('data-is-read', true);\n\n  const ulItem = evt.target.parentNode.parentNode.parentNode;\n  const read = document.createElement('p');\n  read.innerText = 'Already read';\n  read.classList.add('have-read');\n  ulItem.appendChild(read);\n  ulItem.style.opacity = 0.55; //0.22\n  const ID = ulItem.getAttribute('data-id');\n\n  const choosenCardID = evt.target.closest('li.list-news__item').dataset.id;\n  const choosenCardImg = evt.target.closest('div');\n  const imageUrl =\n    ulItem.childNodes[1].childNodes[1].childNodes[1].getAttribute('src');\n  const section = choosenCardImg.childNodes[3].textContent;\n  const titleDiv = evt.target.closest('article');\n  const title = titleDiv.childNodes[3].textContent;\n  const abstract = titleDiv.childNodes[5].textContent;\n  const published_date = titleDiv.childNodes[7].childNodes[1].textContent;\n  const url = titleDiv.childNodes[7].childNodes[3].href;\n  const time = new Date().getTime();\n  const date = new Date(time);\n\n  let storage = localStorage.getItem('read-more');\n  // додаємо елемент\n  const params = {\n    id: choosenCardID,\n    imageUrl: imageUrl,\n    section: section,\n    title: title,\n    abstract: abstract,\n    published_date: published_date,\n    url: url,\n    time: date.toLocaleDateString('en-GB'),\n  };\n\n  const parseStorage = JSON.parse(storage);\n  const uniq = [\n    ...new Map(parseStorage.map(item => [item['id'], item])).values(),\n  ];\n  parseStorage.push(params);\n  const strStorage = JSON.stringify(parseStorage);\n  localStorage.setItem('read-more', strStorage);\n}\nnewsWrapper.addEventListener('click', addRemoveToLocalStorage);\nnewsWrapper.addEventListener('click', addReadMore);\n\nconst weatherCard = document.querySelector('.weather-card');\nconst dateCalendarInput = document.querySelector('.calendar__input');\n\nconst noNews =\n  'https://cdn.dribbble.com/users/2382015/screenshots/6065978/media/8b4662f8023e4e2295f865106b5d3aa7.gif';\nconst noImage =\n  'https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg';\n\nfunction updateNewsList(markup) {\n  newsWrapper.innerHTML = markup;\n  observer.observe(dateCalendarInput, config);\n}\n\ngetPopularNews()\n  .then(({ results }) => {\n    return results.map(createMarkup).join('');\n  })\n  .then(updateNewsList);\n\nfunction createMarkup({\n  title,\n  media,\n  section,\n  id,\n  abstract,\n  published_date,\n  url,\n}) {\n  const imageUrl = media?.[0]?.['media-metadata']?.[2]?.url || noImage;\n  const MAX_SNIPPET_LENGTH = 110;\n  if (abstract.length > MAX_SNIPPET_LENGTH) {\n    abstract = abstract.slice(0, MAX_SNIPPET_LENGTH - 3) + '...';\n  }\n  const date = new Date(published_date);\n  const day = date.getDate().toString().padStart(2, '0');\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\n  const year = date.getFullYear().toString();\n  const formattedDate = `${day}/${month}/${year}`;\n  return `<li class=\"list-news__item\" data-id=\"${id}\" data-pub_date=\"${formattedDate}\"  >\n            <article class=\"item-news__article\">\n              <div class=\"item-news__wrapper-img\">\n                <img class=\"item-news__img\" src=\"${imageUrl}\" alt=\"photo\">\n                <p class=\"item-news__category\">${section}</p>\n                <div class=\"article_flag\">\n                  <button class=\"article_flag--add\"><span class=\"article_flag_text\">Add to favorite</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"none\" stroke=\"#4440f7\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 3C4.239 3 2 5.216 2 7.95c0 2.207.875 7.445 9.488 12.74a.985.985 0 0 0 1.024 0C21.125 15.395 22 10.157 22 7.95C22 5.216 19.761 3 17 3s-5 3-5 3s-2.239-3-5-3Z\"/></svg>\n                  </button>\n                  <button class=\"article_flag--remove is-hidden\"><span class=\"article_flag_text\">Remove from favorite</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"#4b48da\" stroke=\"#4b48da\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 3C4.239 3 2 5.216 2 7.95c0 2.207.875 7.445 9.488 12.74a.985.985 0 0 0 1.024 0C21.125 15.395 22 10.157 22 7.95C22 5.216 19.761 3 17 3s-5 3-5 3s-2.239-3-5-3Z\"/></svg>\n                  </button>\n                </div>\n              </div>\n              <h2 class=\"item-news__title\">${title}</h2>\n              <p class=\"item-news__description\">${abstract}</p>\n              <div class=\"item-news__info\">\n                <span class=\"item-news__info-date\">${formattedDate}</span>\n                <a class=\"item-news__info-link\" href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n              </div>\n            </article>\n          </li>`;\n}\n\nfunction readmoreHandler(e) {\n  if (e.target.nodeName === 'A') {\n    const readMoreLink = e.target;\n    readMoreLink.setAttribute('data-is-read', true);\n\n    const ulItem = e.target.parentElement.parentElement.parentElement;\n    const read = document.createElement('p');\n    read.innerText = 'Already read';\n    read.classList.add('have-read');\n    ulItem.appendChild(read);\n    const ID = ulItem.getAttribute('data-id');\n  }\n  return;\n}\n\nif (!localStorage.getItem('read-more')) {\n  localStorage.setItem('read-more', '[]');\n}\nif (!localStorage.getItem('cards')) {\n  localStorage.setItem('cards', '[]');\n}\n\nconst config = {\n  attributes: true,\n};\n\nlet mutationCount = 0;\n\nconst getFilterNewsByDate = function (el, observer) {\n  for (const mutation of el) {\n    if (mutationCount === 0) {\n      mutationCount += 1;\n    } else {\n      const date = dateCalendarInput.dataset.date.split('.').join('/');\n      weatherCard.style.display = 'none';\n\n      const newsArray = Array.prototype.slice.call(newsWrapper.childNodes);\n      const filteredNewsArray = newsArray.filter(\n        el => el.dataset.pub_date === date\n      );\n      if (filteredNewsArray.length > 0) {\n        newsWrapper.childNodes.forEach(el => {\n          if (el.dataset.pub_date !== date) {\n            el.style.display = 'none';\n          } else {\n            el.style.display = 'block';\n          }\n        });\n      } else {\n        newsWrapper.childNodes.forEach(el => (el.style.display = 'none'));\n        newsWrapper.insertAdjacentHTML(\n          'afterbegin',\n          `<li style=\"margin:0 auto\"><img src=\"${noNews}\" alt=\"no news\"></img></li>`\n        );\n      }\n    }\n  }\n};\n\nconst observer = new MutationObserver(getFilterNewsByDate);\n","export { addRemoveToLocalStorage, updateStorage };\n\nfunction addRemoveToLocalStorage(evt) {\n  if (\n    evt.target.tagName !== 'BUTTON' &&\n    evt.target.tagName !== 'SPAN' &&\n    evt.target.tagName !== 'svg' &&\n    evt.target.tagName !== 'path'\n  ) {\n    return;\n  }\n  if (\n    evt.target.classList.contains('accordion') ||\n    evt.target.classList.contains('container-read')\n  ) {\n    return;\n  }\n  const dateInCard = evt.target.closest('article').childNodes[7].childNodes[1];\n  if (evt.target === dateInCard) {\n    return;\n  }\n\n  let btnAddtoStorage = evt.target;\n\n  const btnDiv = btnAddtoStorage.closest('div.article_flag');\n  const btnDivID = evt.target.closest('li.list-news__item').dataset.id;\n\n  const addButton = evt.target.closest('div').childNodes[1];\n  const removeButton = evt.target.closest('div').childNodes[3];\n  addButton.classList.toggle('is-hidden');\n  removeButton.classList.toggle('is-hidden');\n\n  let storage = localStorage.getItem('cards');\n  let parseStorage = JSON.parse(storage);\n  updateStorage(parseStorage, btnDivID);\n\n  if (btnDiv.hasAttribute('checked')) {\n    btnDiv.removeAttribute('checked');\n    let storage = localStorage.getItem('cards');\n    const parseStorage = JSON.parse(storage);\n    updateStorage(parseStorage, btnDivID);\n    return;\n  }\n\n  btnDiv.setAttribute('checked', true);\n\n  const choosenCardID = evt.target.closest('li.list-news__item').dataset.id;\n  const choosenCardImg = evt.target.closest('div.item-news__wrapper-img');\n  const imageUrl = choosenCardImg.childNodes[1].src;\n  const section = choosenCardImg.childNodes[3].textContent;\n  const titleDiv = evt.target.closest('article');\n  const title = titleDiv.childNodes[3].textContent;\n  const abstract = titleDiv.childNodes[5].textContent;\n  const published_date = titleDiv.childNodes[7].childNodes[1].textContent;\n  const url = titleDiv.childNodes[7].childNodes[3].href;\n\n  storage = localStorage.getItem('cards');\n\n  // додаємо елемент\n  const params = {\n    id: choosenCardID,\n    imageUrl: imageUrl,\n    section: section,\n    title: title,\n    abstract: abstract,\n    published_date: published_date,\n    url: url,\n  };\n\n  parseStorage = JSON.parse(storage);\n  parseStorage.push(params);\n  const strStorage = JSON.stringify(parseStorage);\n  localStorage.setItem('cards', strStorage);\n}\n\n// _____\n\nfunction updateStorage(parseStorage, btnDivID) {\n  const newStorage = parseStorage.reduce((acc, card) => {\n    if (card.id === btnDivID) {\n      return acc;\n    }\n    acc.push(card);\n    return acc;\n  }, []);\n  const strStorage = JSON.stringify(newStorage);\n  localStorage.setItem('cards', strStorage);\n}\n"],"names":["$c3jDA","parcelRequire","$f5cf84364efc901b$export$ebda9f2b28852a0d","parseStorage","btnDivID","newStorage","reduce","acc","card","id","push","strStorage","JSON","stringify","localStorage","setItem","$1675df0f08f03197$var$newsWrapper","document","querySelector","addEventListener","evt","target","tagName","classList","contains","dateInCard","closest","childNodes","btnDiv","dataset","addButton","removeButton","toggle","storage","getItem","parse","hasAttribute","removeAttribute","setAttribute","choosenCardID","choosenCardImg","imageUrl","src","section","textContent","titleDiv","title","abstract","published_date","url","href","params","nodeName","ulItem","parentNode","read","createElement","innerText","add","appendChild","style","opacity","getAttribute","time","Date","getTime","date","toLocaleDateString","Map","map","item","values","$1675df0f08f03197$var$weatherCard","$1675df0f08f03197$var$dateCalendarInput","$1675df0f08f03197$var$createMarkup","media","length","slice","MAX_SNIPPET_LENGTH","formattedDate","getDate","toString","padStart","getMonth","getFullYear","getPopularNews","then","results","join","markup","innerHTML","$1675df0f08f03197$var$observer","observe","$1675df0f08f03197$var$config","attributes","$1675df0f08f03197$var$mutationCount","MutationObserver","el1","observer","mutation","split","display","Array","prototype","call","filter","el","pub_date","forEach","insertAdjacentHTML"],"version":3,"file":"index.a0a6b4b4.js.map"}