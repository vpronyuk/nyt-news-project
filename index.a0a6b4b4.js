var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},s={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in s){var a=s[e];delete s[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},e.parcelRequired7c6=a);var i=a("c3jDA");function n(e,t){const s=e.reduce(((e,s)=>(s.id===t||e.push(s),e)),[]),a=JSON.stringify(s);localStorage.setItem("cards",a)}const o=document.querySelector(".list-news");o.addEventListener("click",(function(e){if("BUTTON"!==e.target.tagName&&"SPAN"!==e.target.tagName&&"svg"!==e.target.tagName&&"path"!==e.target.tagName)return;if(e.target.classList.contains("accordion")||e.target.classList.contains("container-read"))return;const t=e.target.closest("article").childNodes[7].childNodes[1];if(e.target===t)return;const s=e.target.closest("div.article_flag"),a=e.target.closest("li.list-news__item").dataset.id,i=e.target.closest("div").childNodes[1],o=e.target.closest("div").childNodes[3];i.classList.toggle("is-hidden"),o.classList.toggle("is-hidden");let r=localStorage.getItem("cards"),l=JSON.parse(r);if(n(l,a),s.hasAttribute("checked")){s.removeAttribute("checked");let e=localStorage.getItem("cards");return void n(JSON.parse(e),a)}s.setAttribute("checked",!0);const d=e.target.closest("li.list-news__item").dataset.id,c=e.target.closest("div.item-news__wrapper-img"),g=c.childNodes[1].src,p=c.childNodes[3].textContent,h=e.target.closest("article"),m=h.childNodes[3].textContent,u=h.childNodes[5].textContent,f=h.childNodes[7].childNodes[1].textContent,_=h.childNodes[7].childNodes[3].href;r=localStorage.getItem("cards");const w={id:d,imageUrl:g,section:p,title:m,abstract:u,published_date:f,url:_};l=JSON.parse(r),l.push(w);const N=JSON.stringify(l);localStorage.setItem("cards",N)})),o.addEventListener("click",(function(e){if("A"!==e.target.nodeName)return;e.target.setAttribute("data-is-read",!0);const t=e.target.parentNode.parentNode.parentNode,s=document.createElement("p");s.innerText="Already read",s.classList.add("have-read"),t.appendChild(s),t.style.opacity=.55,t.getAttribute("data-id");const a=e.target.closest("li.list-news__item").dataset.id,i=e.target.closest("div"),n=t.childNodes[1].childNodes[1].childNodes[1].getAttribute("src"),o=i.childNodes[3].textContent,r=e.target.closest("article"),l=r.childNodes[3].textContent,d=r.childNodes[5].textContent,c=r.childNodes[7].childNodes[1].textContent,g=r.childNodes[7].childNodes[3].href,p=(new Date).getTime(),h=new Date(p);let m=localStorage.getItem("read-more");const u={id:a,imageUrl:n,section:o,title:l,abstract:d,published_date:c,url:g,time:h.toLocaleDateString("en-GB")},f=JSON.parse(m);new Map(f.map((e=>[e.id,e]))).values(),f.push(u);const _=JSON.stringify(f);localStorage.setItem("read-more",_)}));const r=document.querySelector(".weather-card"),l=document.querySelector(".calendar__input");function d({title:e,media:t,section:s,id:a,abstract:i,published_date:n,url:o}){const r=t?.[0]?.["media-metadata"]?.[2]?.url||"https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg";i.length>110&&(i=i.slice(0,107)+"...");const l=new Date(n),d=`${l.getDate().toString().padStart(2,"0")}/${(l.getMonth()+1).toString().padStart(2,"0")}/${l.getFullYear().toString()}`;return`<li class="list-news__item" data-id="${a}" data-pub_date="${d}"  >\n            <article class="item-news__article">\n              <div class="item-news__wrapper-img">\n                <img class="item-news__img" src="${r}" alt="photo">\n                <p class="item-news__category">${s}</p>\n                <div class="article_flag">\n                  <button class="article_flag--add"><span class="article_flag_text">Add to favorite</span>\n                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="none" stroke="#4440f7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 3C4.239 3 2 5.216 2 7.95c0 2.207.875 7.445 9.488 12.74a.985.985 0 0 0 1.024 0C21.125 15.395 22 10.157 22 7.95C22 5.216 19.761 3 17 3s-5 3-5 3s-2.239-3-5-3Z"/></svg>\n                  </button>\n                  <button class="article_flag--remove is-hidden"><span class="article_flag_text">Remove from favorite</span>\n                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#4b48da" stroke="#4b48da" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 3C4.239 3 2 5.216 2 7.95c0 2.207.875 7.445 9.488 12.74a.985.985 0 0 0 1.024 0C21.125 15.395 22 10.157 22 7.95C22 5.216 19.761 3 17 3s-5 3-5 3s-2.239-3-5-3Z"/></svg>\n                  </button>\n                </div>\n              </div>\n              <h2 class="item-news__title">${e}</h2>\n              <p class="item-news__description">${i}</p>\n              <div class="item-news__info">\n                <span class="item-news__info-date">${d}</span>\n                <a class="item-news__info-link" href="${o}" target="_blank" rel="noreferrer noopener">Read more</a>\n              </div>\n            </article>\n          </li>`}(0,i.getPopularNews)().then((({results:e})=>e.map(d).join(""))).then((function(e){o.innerHTML=e,p.observe(l,c)})),localStorage.getItem("read-more")||localStorage.setItem("read-more","[]"),localStorage.getItem("cards")||localStorage.setItem("cards","[]");const c={attributes:!0};let g=0;const p=new MutationObserver((function(e,t){for(const t of e)if(0===g)g+=1;else{const e=l.dataset.date.split(".").join("/");r.style.display="none";Array.prototype.slice.call(o.childNodes).filter((t=>t.dataset.pub_date===e)).length>0?o.childNodes.forEach((t=>{t.dataset.pub_date!==e?t.style.display="none":t.style.display="block"})):(o.childNodes.forEach((e=>e.style.display="none")),o.insertAdjacentHTML("afterbegin",'<li style="margin:0 auto"><img src="https://cdn.dribbble.com/users/2382015/screenshots/6065978/media/8b4662f8023e4e2295f865106b5d3aa7.gif" alt="no news"></img></li>'))}}));
//# sourceMappingURL=index.a0a6b4b4.js.map
