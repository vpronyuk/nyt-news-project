{"mappings":"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","sources":["src/js/news_cards.js","src/js/favorite_functions.js"],"sourcesContent":["import { getPopularNews } from '../api/newsApi';\nimport { addRemoveToLocalStorage, updateStorage } from './favorite_functions';\n//import addRemoveToLocalStorageREAD from './read';\n\nlet btnAddtoStorage;\n\nconst newsWrapper = document.querySelector('.list-news');\nfunction addReadMore(evt) {\n  if (evt.target.nodeName !== 'A') {\n    return;\n  }\n\n  const readMoreLink = evt.target;\n  readMoreLink.setAttribute('data-is-read', true);\n\n  const ulItem = evt.target.parentNode.parentNode.parentNode;\n  const read = document.createElement('p');\n  read.innerText = 'Already read';\n  read.classList.add('have-read');\n  ulItem.appendChild(read);\n  ulItem.style.opacity = 0.55; //0.22\n  const ID = ulItem.getAttribute('data-id');\n\n  const choosenCardID = evt.target.closest('li.list-news__item').dataset.id;\n  const choosenCardImg = evt.target.closest('div');\n  const imageUrl =\n    ulItem.childNodes[1].childNodes[1].childNodes[1].getAttribute('src');\n  const section = choosenCardImg.childNodes[3].textContent;\n  const titleDiv = evt.target.closest('article');\n  const title = titleDiv.childNodes[3].textContent;\n  const abstract = titleDiv.childNodes[5].textContent;\n  const published_date = titleDiv.childNodes[7].childNodes[1].textContent;\n  const url = titleDiv.childNodes[7].childNodes[3].href;\n  const time = new Date().getTime();\n  const date = new Date(time);\n\n  let storage = localStorage.getItem('read-more');\n  // додаємо елемент\n  const params = {\n    id: choosenCardID,\n    imageUrl: imageUrl,\n    section: section,\n    title: title,\n    abstract: abstract,\n    published_date: published_date,\n    url: url,\n    time: date.toLocaleDateString('en-GB'),\n  };\n\n  const parseStorage = JSON.parse(storage);\n  const uniq = [\n    ...new Map(parseStorage.map(item => [item['id'], item])).values(),\n  ];\n  parseStorage.push(params);\n  const strStorage = JSON.stringify(parseStorage);\n  localStorage.setItem('read-more', strStorage);\n}\nnewsWrapper.addEventListener('click', addRemoveToLocalStorage);\nnewsWrapper.addEventListener('click', addReadMore);\n\nconst weatherCard = document.querySelector('.weather-card');\nconst dateCalendarInput = document.querySelector('.calendar__input');\n\nconst noNews =\n  'https://cdn.dribbble.com/users/2382015/screenshots/6065978/media/8b4662f8023e4e2295f865106b5d3aa7.gif';\nconst noImage =\n  'https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg';\n\nfunction updateNewsList(markup) {\n  newsWrapper.innerHTML = markup;\n  observer.observe(dateCalendarInput, config);\n}\n\ngetPopularNews()\n  .then(({ results }) => {\n    return results.map(createMarkup).join('');\n  })\n  .then(updateNewsList);\n\nfunction createMarkup({\n  title,\n  media,\n  section,\n  id,\n  abstract,\n  published_date,\n  url,\n}) {\n  const imageUrl = media?.[0]?.['media-metadata']?.[2]?.url || noImage;\n  const MAX_SNIPPET_LENGTH = 110;\n  if (abstract.length > MAX_SNIPPET_LENGTH) {\n    abstract = abstract.slice(0, MAX_SNIPPET_LENGTH - 3) + '...';\n  }\n  const date = new Date(published_date);\n  const day = date.getDate().toString().padStart(2, '0');\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\n  const year = date.getFullYear().toString();\n  const formattedDate = `${day}/${month}/${year}`;\n  return `<li class=\"list-news__item\" data-id=\"${id}\" data-pub_date=\"${formattedDate}\"  >\n            <article class=\"item-news__article\">\n              <div class=\"item-news__wrapper-img\">\n                <img class=\"item-news__img\" src=\"${imageUrl}\" alt=\"photo\">\n                <p class=\"item-news__category\">${section}</p>\n                <div class=\"article_flag\">\n                  <button class=\"article_flag--add\"><span class=\"article_flag_text\">Add to favorite</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"none\" stroke=\"#4440f7\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 3C4.239 3 2 5.216 2 7.95c0 2.207.875 7.445 9.488 12.74a.985.985 0 0 0 1.024 0C21.125 15.395 22 10.157 22 7.95C22 5.216 19.761 3 17 3s-5 3-5 3s-2.239-3-5-3Z\"/></svg>\n                  </button>\n                  <button class=\"article_flag--remove is-hidden\"><span class=\"article_flag_text\">Remove from favorite</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"#4b48da\" stroke=\"#4b48da\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 3C4.239 3 2 5.216 2 7.95c0 2.207.875 7.445 9.488 12.74a.985.985 0 0 0 1.024 0C21.125 15.395 22 10.157 22 7.95C22 5.216 19.761 3 17 3s-5 3-5 3s-2.239-3-5-3Z\"/></svg>\n                  </button>\n                </div>\n              </div>\n              <h2 class=\"item-news__title\">${title}</h2>\n              <p class=\"item-news__description\">${abstract}</p>\n              <div class=\"item-news__info\">\n                <span class=\"item-news__info-date\">${formattedDate}</span>\n                <a class=\"item-news__info-link\" href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n              </div>\n            </article>\n          </li>`;\n}\n\nfunction readmoreHandler(e) {\n  if (e.target.nodeName === 'A') {\n    const readMoreLink = e.target;\n    readMoreLink.setAttribute('data-is-read', true);\n\n    const ulItem = e.target.parentElement.parentElement.parentElement;\n    const read = document.createElement('p');\n    read.innerText = 'Already read';\n    read.classList.add('have-read');\n    ulItem.appendChild(read);\n    const ID = ulItem.getAttribute('data-id');\n  }\n  return;\n}\n\nif (!localStorage.getItem('read-more')) {\n  localStorage.setItem('read-more', '[]');\n}\nif (!localStorage.getItem('cards')) {\n  localStorage.setItem('cards', '[]');\n}\n\nconst config = {\n  attributes: true,\n};\n\nlet mutationCount = 0;\n\nconst getFilterNewsByDate = function (el, observer) {\n  for (const mutation of el) {\n    if (mutationCount === 0) {\n      mutationCount += 1;\n    } else {\n      const date = dateCalendarInput.dataset.date.split('.').join('/');\n      weatherCard.style.display = 'none';\n\n      const newsArray = Array.prototype.slice.call(newsWrapper.childNodes);\n      const filteredNewsArray = newsArray.filter(\n        el => el.dataset.pub_date === date\n      );\n      if (filteredNewsArray.length > 0) {\n        newsWrapper.childNodes.forEach(el => {\n          if (el.dataset.pub_date !== date) {\n            el.style.display = 'none';\n          } else {\n            el.style.display = 'block';\n          }\n        });\n      } else {\n        newsWrapper.childNodes.forEach(el => (el.style.display = 'none'));\n        newsWrapper.insertAdjacentHTML(\n          'afterbegin',\n          `<li style=\"margin:0 auto\"><img src=\"${noNews}\" alt=\"no news\"></img></li>`\n        );\n      }\n    }\n  }\n};\n\nconst observer = new MutationObserver(getFilterNewsByDate);\n","export { addRemoveToLocalStorage, updateStorage };\n\nfunction addRemoveToLocalStorage(evt) {\n  if (\n    evt.target.tagName !== 'BUTTON' &&\n    evt.target.tagName !== 'SPAN' &&\n    evt.target.tagName !== 'svg' &&\n    evt.target.tagName !== 'path'\n  ) {\n    return;\n  }\n  if (\n    evt.target.classList.contains('accordion') ||\n    evt.target.classList.contains('container-read')\n  ) {\n    return;\n  }\n  const dateInCard = evt.target.closest('article').childNodes[7].childNodes[1];\n  if (evt.target === dateInCard) {\n    return;\n  }\n\n  let btnAddtoStorage = evt.target;\n\n  const btnDiv = btnAddtoStorage.closest('div.article_flag');\n  const btnDivID = evt.target.closest('li.list-news__item').dataset.id;\n\n  const addButton = evt.target.closest('div').childNodes[1];\n  const removeButton = evt.target.closest('div').childNodes[3];\n  addButton.classList.toggle('is-hidden');\n  removeButton.classList.toggle('is-hidden');\n\n  let storage = localStorage.getItem('cards');\n  let parseStorage = JSON.parse(storage);\n  updateStorage(parseStorage, btnDivID);\n\n  if (btnDiv.hasAttribute('checked')) {\n    btnDiv.removeAttribute('checked');\n    let storage = localStorage.getItem('cards');\n    const parseStorage = JSON.parse(storage);\n    updateStorage(parseStorage, btnDivID);\n    return;\n  }\n\n  btnDiv.setAttribute('checked', true);\n\n  const choosenCardID = evt.target.closest('li.list-news__item').dataset.id;\n  const choosenCardImg = evt.target.closest('div.item-news__wrapper-img');\n  const imageUrl = choosenCardImg.childNodes[1].src;\n  const section = choosenCardImg.childNodes[3].textContent;\n  const titleDiv = evt.target.closest('article');\n  const title = titleDiv.childNodes[3].textContent;\n  const abstract = titleDiv.childNodes[5].textContent;\n  const published_date = titleDiv.childNodes[7].childNodes[1].textContent;\n  const url = titleDiv.childNodes[7].childNodes[3].href;\n\n  storage = localStorage.getItem('cards');\n\n  // додаємо елемент\n  const params = {\n    id: choosenCardID,\n    imageUrl: imageUrl,\n    section: section,\n    title: title,\n    abstract: abstract,\n    published_date: published_date,\n    url: url,\n  };\n\n  parseStorage = JSON.parse(storage);\n  parseStorage.push(params);\n  const strStorage = JSON.stringify(parseStorage);\n  localStorage.setItem('cards', strStorage);\n}\n\n// _____\n\nfunction updateStorage(parseStorage, btnDivID) {\n  const newStorage = parseStorage.reduce((acc, card) => {\n    if (card.id === btnDivID) {\n      return acc;\n    }\n    acc.push(card);\n    return acc;\n  }, []);\n  const strStorage = JSON.stringify(newStorage);\n  localStorage.setItem('cards', strStorage);\n}\n"],"names":["$8nrFW","parcelRequire","$dbcae0eeb23859d6$export$ebda9f2b28852a0d","parseStorage","btnDivID","newStorage","reduce","acc","card","id","push","strStorage","JSON","stringify","localStorage","setItem","$7bac75000fd467ef$var$newsWrapper","document","querySelector","addEventListener","evt","target","tagName","classList","contains","dateInCard","closest","childNodes","btnDiv","dataset","addButton","removeButton","toggle","storage","getItem","parse","hasAttribute","removeAttribute","storage1","setAttribute","choosenCardID","choosenCardImg","imageUrl","src","section","textContent","titleDiv","title","abstract","published_date","url","href","params","nodeName","ulItem","parentNode","read","createElement","innerText","add","appendChild","style","opacity","getAttribute","time","Date","getTime","date","toLocaleDateString","$parcel$interopDefault","Map","map","item","values","$7bac75000fd467ef$var$weatherCard","$7bac75000fd467ef$var$dateCalendarInput","$7bac75000fd467ef$var$createMarkup","param","ref","ref1","ref2","media","length","slice","MAX_SNIPPET_LENGTH","day","getDate","toString","padStart","month","getMonth","year","getFullYear","formattedDate","concat","$dAhAI","getPopularNews","then","results","join","markup","innerHTML","$7bac75000fd467ef$var$observer","observe","$7bac75000fd467ef$var$config","attributes","$7bac75000fd467ef$var$mutationCount","MutationObserver","el1","observer","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","split","display","Array","prototype","call","filter","el","pub_date","forEach","insertAdjacentHTML","err","return"],"version":3,"file":"index.4dd785aa.js.map"}